<UserControl
  x:Class="Alwajeih.Views.Finance.ExternalPaymentView"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  FlowDirection="RightToLeft"
  FontFamily="{StaticResource Tajawal}"
  FontSize="14"
  xmlns:vm="clr-namespace:Alwajeih.ViewModels.Finance"
>
  <UserControl.DataContext>
    <vm:ExternalPaymentViewModel />
  </UserControl.DataContext>
  <UserControl.Resources>
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/Resources/Styles/ScrollBarStyles.xaml" />
        <ResourceDictionary Source="/Resources/Styles/DataGrids.xaml" />
        <ResourceDictionary Source="/Resources/Styles/Colors.xaml" />
        <ResourceDictionary Source="/Resources/Styles/Buttons.xaml" />
        <ResourceDictionary Source="/Resources/Styles/TextBoxes.xaml" />
        <ResourceDictionary Source="/Resources/Styles/MainStyles.xaml" />
      </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
  </UserControl.Resources>
  <Grid Background="{StaticResource BackgroundColor}">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="20">
      <TextBlock Text="ðŸ§" FontSize="36" Margin="0,0,15,0" />
      <TextBlock Text="Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© (ÙƒØ±ÙŠÙ…ÙŠ)" Style="{StaticResource PageTitle}" />
    </StackPanel>
    <Grid Grid.Row="1" Margin="20">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" MinWidth="150" />
        <ColumnDefinition Width="350" />
      </Grid.ColumnDefinitions>
      <Border Grid.Column="0" Style="{StaticResource ModernCard}" Margin="0,0,10,0">
        <StackPanel>
          <TextBlock Text="â³ Ø§Ù„Ø¯ÙØ¹Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø©" Style="{StaticResource SectionTitle}" />
          <Border CornerRadius="8" BorderBrush="#E2E8F0" BorderThickness="1" Background="White" Margin="0,12,0,0">
            <DataGrid
              ItemsSource="{Binding PendingPayments}"
              Height="560"
              AutoGenerateColumns="False"
              IsReadOnly="True"
              Style="{StaticResource ModernDataGrid}"
            >
              <DataGrid.Columns>
                <DataGridTextColumn Header="Ø§Ù„Ø¹Ø¶Ùˆ" Binding="{Binding MemberName}" Width="Auto" MinWidth="100" />
                <DataGridTextColumn Header="Ø§Ù„Ù…Ø±Ø¬Ø¹" Binding="{Binding ReferenceNumber}" Width="*" MinWidth="150" />
                <DataGridTextColumn
                  Header="Ø§Ù„Ù…Ø¨Ù„Øº"
                  Binding="{Binding Amount, StringFormat=N2}"
                  Width="Auto" MinWidth="80"
                />
                <DataGridTextColumn
                  Header="Ø§Ù„ØªØ§Ø±ÙŠØ®"
                  Binding="{Binding PaymentDate, StringFormat=yyyy-MM-dd}"
                  Width="Auto" MinWidth="80"
                />
                <DataGridTextColumn Header="Ø§Ù„Ù…ØµØ¯Ø±" Binding="{Binding PaymentSource}" Width="Auto" MinWidth="80" />
              </DataGrid.Columns>
            </DataGrid>
          </Border>
        </StackPanel>
      </Border>
      <Border Grid.Column="1" Style="{StaticResource ModernCard}">
        <ScrollViewer VerticalScrollBarVisibility="Auto" Style="{StaticResource ModernScrollViewer}">
          <StackPanel>
            <TextBlock Text="âž• ØªØ³Ø¬ÙŠÙ„ Ø¯ÙØ¹Ø©" Style="{StaticResource SectionTitle}" />
            
            <TextBlock Text="Ø§Ù„Ø¹Ø¶Ùˆ *" Style="{StaticResource FieldLabel}" Margin="0,15,0,5" />
            <ComboBox 
              ItemsSource="{Binding Members}" 
              SelectedItem="{Binding SelectedMember}"
              Style="{StaticResource ModernComboBox}">
              <ComboBox.ItemTemplate>
                <DataTemplate>
                  <StackPanel>
                    <TextBlock Text="{Binding Name}" FontWeight="SemiBold" />
                    <TextBlock Text="{Binding Phone}" FontSize="11" Foreground="#64748B" />
                  </StackPanel>
                </DataTemplate>
              </ComboBox.ItemTemplate>
            </ComboBox>
            
            <TextBlock Text="Ø±Ù‚Ù… Ø§Ù„Ù…Ø±Ø¬Ø¹ *" Style="{StaticResource FieldLabel}" Margin="0,15,0,5" />
            <TextBox Text="{Binding ReferenceNumber}" Style="{StaticResource ModernTextBox}" />
            
            <TextBlock Text="Ø§Ù„Ù…Ø¨Ù„Øº (Ø±ÙŠØ§Ù„) *" Style="{StaticResource FieldLabel}" Margin="0,15,0,5" />
            <TextBox
              Text="{Binding Amount}"
              Style="{StaticResource ModernTextBox}"
              FontSize="16"
              Height="50"
            />
            
            <TextBlock Text="Ø§Ù„ØªØ§Ø±ÙŠØ® *" Style="{StaticResource FieldLabel}" Margin="0,15,0,5" />
            <DatePicker
              SelectedDate="{Binding PaymentDate}"
              Style="{StaticResource ModernDatePicker}"
            />
            
            <TextBlock Text="Ø§Ù„Ù…ØµØ¯Ø± *" Style="{StaticResource FieldLabel}" Margin="0,15,0,5" />
            <ComboBox SelectedItem="{Binding PaymentSource}" Style="{StaticResource ModernComboBox}">
              <ComboBoxItem Content="ÙƒØ±ÙŠÙ…ÙŠ" IsSelected="True" />
              <ComboBoxItem Content="ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ" />
              <ComboBoxItem Content="Ø£Ø®Ø±Ù‰" />
            </ComboBox>
            
            <TextBlock Text="Ù…Ù„Ø§Ø­Ø¸Ø§Øª" Style="{StaticResource FieldLabel}" Margin="0,15,0,5" />
            <TextBox
              Text="{Binding Notes}"
              Style="{StaticResource ModernTextBox}"
              Height="60"
              TextWrapping="Wrap"
            />
            <Button
              Command="{Binding RegisterPaymentCommand}"
              Style="{StaticResource PrimaryButton}"
              Height="50"
              Margin="0,25,0,10"
            >
              <StackPanel Orientation="Horizontal">
                <TextBlock Text="âœ¨" FontSize="18" Margin="0,0,10,0" />
                <TextBlock Text="ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙØ¹Ø©" FontSize="16" />
              </StackPanel>
            </Button>
          </StackPanel>
        </ScrollViewer>
      </Border>
    </Grid>
  </Grid>
</UserControl>
