<Window x:Class="Alwajeih.Views.Finance.AddOtherTransactionWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:Alwajeih.ViewModels.Finance"
        Title="Ø¥Ø¶Ø§ÙØ© Ø®Ø±Ø¬ÙŠØ§Øª ÙˆÙ…ÙÙ‚ÙˆØ¯Ø§Øª"
        Height="550"
        Width="500"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        FlowDirection="RightToLeft"
        Background="#F8FAFC">
    
    <Window.DataContext>
        <vm:AddOtherTransactionViewModel />
    </Window.DataContext>

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Resources/Styles/MainStyles.xaml"/>
                <ResourceDictionary Source="/Resources/Styles/Colors.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            
            <Style TargetType="TextBlock">
                <Setter Property="FontFamily" Value="{DynamicResource Tajawal}"/>
                <Setter Property="FontSize" Value="13"/>
            </Style>
            
            <Style TargetType="TextBox">
                <Setter Property="FontFamily" Value="{DynamicResource Tajawal}"/>
                <Setter Property="FontSize" Value="13"/>
                <Setter Property="Padding" Value="8"/>
                <Setter Property="BorderBrush" Value="#CBD5E1"/>
                <Setter Property="BorderThickness" Value="1"/>
            </Style>
            
            <Style TargetType="ComboBox">
                <Setter Property="FontFamily" Value="{DynamicResource Tajawal}"/>
                <Setter Property="FontSize" Value="13"/>
                <Setter Property="Padding" Value="8"/>
            </Style>
        </ResourceDictionary>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† -->
        <Border Grid.Row="0" Background="#3B82F6" CornerRadius="8" Padding="15" Margin="0,0,0,20">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <TextBlock Text="ðŸ’¸" FontSize="24" Margin="0,0,10,0" VerticalAlignment="Center"/>
                <TextBlock Text="Ø¥Ø¶Ø§ÙØ© Ø®Ø±Ø¬ÙŠØ§Øª ÙˆÙ…ÙÙ‚ÙˆØ¯Ø§Øª" 
                          FontSize="18" 
                          FontWeight="Bold" 
                          Foreground="White"
                          VerticalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                
                <!-- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ -->
                <Border Background="White" CornerRadius="8" Padding="15" Margin="0,0,0,15" 
                        BorderBrush="#E2E8F0" BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="ðŸ“… Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹" FontWeight="SemiBold" Foreground="#1E293B" Margin="0,0,0,8"/>
                        <ComboBox ItemsSource="{Binding AvailableWeeks}"
                                 SelectedItem="{Binding SelectedWeekNumber}"
                                 Height="40"/>
                    </StackPanel>
                </Border>

                <!-- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ÙŠÙˆÙ… -->
                <Border Background="White" CornerRadius="8" Padding="15" Margin="0,0,0,15"
                        BorderBrush="#E2E8F0" BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="ðŸ“† Ø§Ù„ÙŠÙˆÙ…" FontWeight="SemiBold" Foreground="#1E293B" Margin="0,0,0,8"/>
                        <ComboBox ItemsSource="{Binding AvailableDays}"
                                 SelectedValue="{Binding SelectedDayNumber}"
                                 SelectedValuePath="DayNumber"
                                 DisplayMemberPath="DayName"
                                 Height="40"/>
                    </StackPanel>
                </Border>

                <!-- Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø­Ø³ÙˆØ¨ -->
                <Border Background="#FEF3C7" CornerRadius="8" Padding="12" Margin="0,0,0,15"
                        BorderBrush="#FDE68A" BorderThickness="1">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="ðŸ“…" FontSize="16" Margin="0,0,8,0"/>
                        <TextBlock Text="Ø§Ù„ØªØ§Ø±ÙŠØ®: " FontWeight="SemiBold" Foreground="#92400E"/>
                        <TextBlock Text="{Binding TransactionDate, StringFormat=dd/MM/yyyy}" 
                                  FontWeight="Bold" 
                                  Foreground="#92400E"/>
                    </StackPanel>
                </Border>

                <!-- Ù†ÙˆØ¹ Ø§Ù„Ø®Ø±Ø¬ÙŠØ© -->
                <Border Background="White" CornerRadius="8" Padding="15" Margin="0,0,0,15"
                        BorderBrush="#E2E8F0" BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="ðŸ“‹ Ù†ÙˆØ¹ Ø§Ù„Ø®Ø±Ø¬ÙŠØ©" FontWeight="SemiBold" Foreground="#1E293B" Margin="0,0,0,8"/>
                        <ComboBox ItemsSource="{Binding TransactionTypes}"
                                 SelectedValue="{Binding SelectedTransactionType}"
                                 SelectedValuePath="Type"
                                 Height="40">
                            <ComboBox.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel>
                                        <TextBlock Text="{Binding Type}" FontWeight="SemiBold" FontSize="13"/>
                                        <TextBlock Text="{Binding Description}" FontSize="11" Foreground="#64748B"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ComboBox.ItemTemplate>
                        </ComboBox>
                    </StackPanel>
                </Border>

                <!-- Ø§Ù„Ù…Ø¨Ù„Øº -->
                <Border Background="White" CornerRadius="8" Padding="15" Margin="0,0,0,15"
                        BorderBrush="#E2E8F0" BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="ðŸ’° Ø§Ù„Ù…Ø¨Ù„Øº (Ø±ÙŠØ§Ù„)" FontWeight="SemiBold" Foreground="#1E293B" Margin="0,0,0,8"/>
                        <TextBox Text="{Binding Amount, UpdateSourceTrigger=PropertyChanged}"
                                Height="40"
                                FontSize="16"
                                FontWeight="SemiBold"/>
                    </StackPanel>
                </Border>

                <!-- Ø§Ù„ÙˆØµÙ -->
                <Border Background="White" CornerRadius="8" Padding="15" Margin="0,0,0,15"
                        BorderBrush="#E2E8F0" BorderThickness="1">
                    <StackPanel>
                        <TextBlock Text="ðŸ“ Ø§Ù„ÙˆØµÙ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" FontWeight="SemiBold" Foreground="#1E293B" Margin="0,0,0,8"/>
                        <TextBox Text="{Binding Description, UpdateSourceTrigger=PropertyChanged}"
                                Height="80"
                                TextWrapping="Wrap"
                                AcceptsReturn="True"
                                VerticalScrollBarVisibility="Auto"/>
                    </StackPanel>
                </Border>

                <!-- Ù…Ù„Ø§Ø­Ø¸Ø© -->
                <Border Background="#DBEAFE" CornerRadius="8" Padding="12" Margin="0,0,0,0"
                        BorderBrush="#BFDBFE" BorderThickness="1">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                            <TextBlock Text="â„¹ï¸" FontSize="14" Margin="0,0,6,0"/>
                            <TextBlock Text="Ù…Ù„Ø§Ø­Ø¸Ø© Ù‡Ø§Ù…Ø©" FontWeight="Bold" Foreground="#1E40AF"/>
                        </StackPanel>
                        <TextBlock TextWrapping="Wrap" Foreground="#1E3A8A" FontSize="12">
                            <Run Text="â€¢ Ø§Ù„Ø®Ø±Ø¬ÙŠØ§Øª ÙˆØ§Ù„Ù…ÙÙ‚ÙˆØ¯Ø§Øª ØªÙØ®ØµÙ… Ù…Ù† Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ ÙÙŠ Ø§Ù„Ø¬Ø±Ø¯ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ"/>
                            <LineBreak/>
                            <Run Text="â€¢ ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ø®Ø±Ø¬ÙŠØ§Øª Ø³Ø§Ø¨Ù‚Ø© Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹ Ø³Ø§Ø¨Ù‚Ø©"/>
                            <LineBreak/>
                            <Run Text="â€¢ ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ ÙˆØ§Ù„ÙŠÙˆÙ… Ø§Ù„ØµØ­ÙŠØ­ÙŠÙ†"/>
                        </TextBlock>
                    </StackPanel>
                </Border>

            </StackPanel>
        </ScrollViewer>

        <!-- Ø§Ù„Ø£Ø²Ø±Ø§Ø± -->
        <Grid Grid.Row="2" Margin="0,20,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="10"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Ø²Ø± Ø§Ù„Ø­ÙØ¸ -->
            <Button Grid.Column="0"
                    Content="ðŸ’¾ Ø­ÙØ¸"
                    Height="45"
                    FontSize="14"
                    FontWeight="SemiBold"
                    Background="#10B981"
                    Foreground="White"
                    BorderThickness="0"
                    Cursor="Hand"
                    Command="{Binding SaveCommand}">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}"
                                           CornerRadius="8"
                                           BorderThickness="0">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#059669"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Background" Value="#9CA3AF"/>
                                <Setter Property="Cursor" Value="No"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>

            <!-- Ø²Ø± Ø§Ù„Ø¥Ù„ØºØ§Ø¡ -->
            <Button Grid.Column="2"
                    Content="âŒ Ø¥Ù„ØºØ§Ø¡"
                    Height="45"
                    FontSize="14"
                    FontWeight="SemiBold"
                    Background="#6B7280"
                    Foreground="White"
                    BorderThickness="0"
                    Cursor="Hand"
                    Command="{Binding CancelCommand}">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}"
                                           CornerRadius="8"
                                           BorderThickness="0">
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#4B5563"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </Button>
        </Grid>
    </Grid>
</Window>
