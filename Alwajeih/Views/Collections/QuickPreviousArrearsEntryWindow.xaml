<Window x:Class="Alwajeih.Views.Collections.QuickPreviousArrearsEntryWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Ø³Ø§Ø¨Ù‚Ø§Øª Ø¢Ø®Ø± Ø£Ø³Ø¨ÙˆØ¹ (Ù…ØªØ±Ø§ÙƒÙ…Ø©)"
        Height="720" Width="550"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Background="#F1F5F9"
        FlowDirection="RightToLeft"
        FontFamily="{StaticResource Tajawal}"
        FontSize="14">
    
    <Border Margin="20" Background="White" CornerRadius="12" Padding="25" BorderBrush="#E2E8F0" BorderThickness="1">
        <Border.Effect>
            <DropShadowEffect Color="Black" BlurRadius="15" ShadowDepth="0" Opacity="0.08" />
        </Border.Effect>
        
        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <StackPanel>
            <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,5">
                <TextBlock Text="ðŸ“Š" FontSize="28" Margin="0,0,10,0"/>
                <TextBlock Text="Ø³Ø§Ø¨Ù‚Ø§Øª Ø¢Ø®Ø± Ø£Ø³Ø¨ÙˆØ¹" FontSize="22" FontWeight="Bold" Foreground="#1E293B" VerticalAlignment="Center"/>
            </StackPanel>
            <TextBlock Text="Ø§Ù„Ø³Ø§Ø¨Ù‚Ø§Øª Ø§Ù„Ù…ØªØ±Ø§ÙƒÙ…Ø© Ù…Ù† ÙƒÙ„ Ø§Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©" 
                      FontSize="13" Foreground="#64748B" Margin="0,0,0,25" 
                      HorizontalAlignment="Center" FontStyle="Italic"/>
            
            <!-- Ø¨Ø­Ø« Ø³Ø±ÙŠØ¹ Ø¹Ù† Ø§Ù„Ø¹Ø¶Ùˆ -->
            <TextBlock Text="ðŸ” Ø¨Ø­Ø« Ø³Ø±ÙŠØ¹ Ø¹Ù† Ø§Ù„Ø¹Ø¶Ùˆ" FontSize="13" FontWeight="SemiBold" Foreground="#475569" Margin="0,0,0,8"/>
            <Border Background="#F8FAFC" CornerRadius="8" Padding="10,8" Margin="0,0,0,12" BorderBrush="#E2E8F0" BorderThickness="1">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="ðŸ”" FontSize="16" Margin="0,0,8,0" VerticalAlignment="Center" Foreground="#64748B"/>
                    <TextBox Grid.Column="1" x:Name="SearchTextBox"
                            Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                            FontSize="14"
                            Padding="6"
                            BorderThickness="0"
                            Background="Transparent"
                            VerticalContentAlignment="Center">
                        <TextBox.Style>
                            <Style TargetType="TextBox">
                                <Setter Property="Foreground" Value="#1E293B"/>
                                <Style.Triggers>
                                    <Trigger Property="Text" Value="">
                                        <Setter Property="Background">
                                            <Setter.Value>
                                                <VisualBrush AlignmentX="Left" AlignmentY="Center" Stretch="None">
                                                    <VisualBrush.Visual>
                                                        <TextBlock Text="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¹Ø¶Ùˆ..." Foreground="#94A3B8" FontSize="14" Padding="6,0,0,0"/>
                                                    </VisualBrush.Visual>
                                                </VisualBrush>
                                            </Setter.Value>
                                        </Setter>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </TextBox.Style>
                    </TextBox>
                </Grid>
            </Border>
            
            <!-- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ø¶Ùˆ -->
            <TextBlock Text="Ø§Ø®ØªØ± Ø§Ù„Ø¹Ø¶Ùˆ *" FontSize="13" FontWeight="SemiBold" Foreground="#475569" Margin="0,0,0,8"/>
            <ComboBox x:Name="MemberComboBox"
                     ItemsSource="{Binding FilteredMembers}" 
                     SelectedItem="{Binding SelectedMember}"
                     DisplayMemberPath="MemberName"
                     IsEditable="True"
                     IsTextSearchEnabled="True"
                     StaysOpenOnEdit="True"
                     Height="45"
                     FontSize="15"
                     Margin="0,0,0,20"/>
            
            <!-- Ù†Ø·Ø§Ù‚ Ø§Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹ -->
            <Border Background="#EFF6FF" CornerRadius="8" Padding="12" Margin="0,0,0,20" BorderBrush="#DBEAFE" BorderThickness="1">
                <StackPanel>
                    <TextBlock Text="ðŸ“… Ù†Ø·Ø§Ù‚ Ø§Ù„Ø£Ø³Ø§Ø¨ÙŠØ¹ (ØªÙ„Ù‚Ø§Ø¦ÙŠ)" FontSize="12" FontWeight="SemiBold" Foreground="#1E40AF" Margin="0,0,0,5"/>
                    <TextBlock FontSize="13" Foreground="#1E3A8A">
                        <Run Text="Ù…Ù† Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 1 Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹"/>
                        <Run Text="{Binding AutoWeekTo}" FontWeight="Bold"/>
                    </TextBlock>
                </StackPanel>
            </Border>
            
            <!-- Ø§Ù„Ù…Ø¨Ø§Ù„Øº -->
            <Border Background="#F8FAFC" CornerRadius="10" Padding="18" Margin="0,0,0,20" BorderBrush="#E2E8F0" BorderThickness="1">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <!-- Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ (Ø«Ø§Ø¨Øª - Ù„Ù„Ù‚Ø±Ø§Ø¡Ø© ÙÙ‚Ø·) -->
                    <StackPanel Grid.Row="0" Margin="0,0,0,12">
                        <TextBlock Text="Ù…Ø§ Ø¹Ù„ÙŠÙƒÙ… (Ø«Ø§Ø¨Øª)" FontSize="13" FontWeight="SemiBold" Foreground="#3B82F6" Margin="0,0,0,8"/>
                        <Border Background="#EFF6FF" CornerRadius="8" Padding="12" BorderBrush="#93C5FD" BorderThickness="2">
                            <TextBlock Text="{Binding TotalOriginalAmount, StringFormat=N2}" 
                                      FontSize="18" FontWeight="Bold" Foreground="#1E40AF"
                                      VerticalAlignment="Center" HorizontalAlignment="Center" Height="40"/>
                        </Border>
                    </StackPanel>
                    
                    <!-- Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ (Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…) -->
                    <StackPanel Grid.Row="1" Margin="0,0,0,12">
                        <TextBlock Text="Ø§Ù„Ù…ØªØ£Ø®Ø±Ø§Øª" FontSize="13" FontWeight="Bold" Foreground="#DC2626" Margin="0,0,0,8"/>
                        <Border Background="White" CornerRadius="8" Padding="12" BorderBrush="#DC2626" BorderThickness="2">
                            <TextBox x:Name="RemainingAmountTextBox"
                                    Text="{Binding QuickRemaining, UpdateSourceTrigger=PropertyChanged}" 
                                    FontSize="20" FontWeight="Bold" Foreground="#DC2626"
                                    BorderThickness="0" Background="Transparent"
                                    VerticalContentAlignment="Center" Height="45"/>
                        </Border>
                    </StackPanel>
                    
                    <!-- Ø§Ù„Ù…Ø¯ÙÙˆØ¹ (Ù…Ø­Ø³ÙˆØ¨ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹) -->
                    <StackPanel Grid.Row="2">
                        <TextBlock Text="Ù…Ø§ Ù„Ù‡Ù…" FontSize="13" FontWeight="SemiBold" Foreground="#10B981" Margin="0,0,0,8"/>
                        <Border Background="#ECFDF5" CornerRadius="8" Padding="12" BorderBrush="#10B981" BorderThickness="2">
                            <TextBlock Text="{Binding CalculatedPaid, StringFormat=N2}" 
                                      FontSize="18" FontWeight="Bold" Foreground="#10B981"
                                      VerticalAlignment="Center" HorizontalAlignment="Center" Height="40"/>
                        </Border>
                    </StackPanel>
                </Grid>
            </Border>
            
            <!-- Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) -->
            <TextBlock Text="Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" FontSize="13" Foreground="#64748B" Margin="0,0,0,8"/>
            <TextBox Text="{Binding QuickNotes, UpdateSourceTrigger=PropertyChanged}"
                     Height="70" 
                     FontSize="13" 
                     TextWrapping="Wrap" 
                     AcceptsReturn="True"
                     VerticalContentAlignment="Top" 
                     Padding="10"
                     Margin="0,0,0,25"/>
            
            <!-- Ø§Ù„Ø£Ø²Ø±Ø§Ø± -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="10"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- Ø²Ø± Ø§Ù„Ø­ÙØ¸ -->
                <Button Grid.Column="0"
                       Command="{Binding SaveQuickEntryCommand}"
                       Height="50" 
                       Background="#10B981" 
                       Foreground="White"
                       FontSize="15" 
                       FontWeight="Bold" 
                       BorderThickness="0" 
                       Cursor="Hand">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}"
                                               CornerRadius="10"
                                               Padding="{TemplateBinding Padding}">
                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Background" Value="#059669"/>
                                            </Trigger>
                                            <Trigger Property="IsEnabled" Value="False">
                                                <Setter Property="Background" Value="#94A3B8"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Button.Style>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <TextBlock Text="âœ…" FontSize="18" Margin="0,0,8,0"/>
                        <TextBlock Text="Ø­ÙØ¸" FontSize="15"/>
                    </StackPanel>
                </Button>
                
                <!-- Ø²Ø± Ø¥ØºÙ„Ø§Ù‚ -->
                <Button Grid.Column="2"
                       Click="CloseButton_Click"
                       Height="50" 
                       Background="#64748B" 
                       Foreground="White"
                       FontSize="15" 
                       FontWeight="Bold" 
                       BorderThickness="0" 
                       Cursor="Hand">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}"
                                               CornerRadius="10"
                                               Padding="{TemplateBinding Padding}">
                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Background" Value="#475569"/>
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Button.Style>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <TextBlock Text="âœ–" FontSize="18" Margin="0,0,8,0"/>
                        <TextBlock Text="Ø¥ØºÙ„Ø§Ù‚" FontSize="15"/>
                    </StackPanel>
                </Button>
            </Grid>
            
            <!-- Ù…Ù„Ø§Ø­Ø¸Ø© -->
            <Border Background="#DBEAFE" CornerRadius="8" Padding="12" Margin="0,20,0,0">
                <TextBlock TextWrapping="Wrap" FontSize="12" Foreground="#1E40AF">
                    <Run Text="ðŸ’¡ Ù†ØµÙŠØ­Ø©: Ø§Ø¶ØºØ· Enter Ø¨Ø¹Ø¯ ÙƒÙ„ Ø¥Ø¯Ø®Ø§Ù„ Ù„Ù„Ø­ÙØ¸ ÙˆØ§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø¹Ø¶Ùˆ Ø§Ù„ØªØ§Ù„ÙŠ Ø¨Ø³Ø±Ø¹Ø©"/>
                </TextBlock>
            </Border>
        </StackPanel>
        </ScrollViewer>
    </Border>
</Window>
