<UserControl
  x:Class="Alwajeih.Views.Management.BackupView"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  FlowDirection="RightToLeft"
  FontFamily="{StaticResource Tajawal}"
  FontSize="14"
  xmlns:vm="clr-namespace:Alwajeih.ViewModels.Management"
>
  <UserControl.DataContext>
    <vm:BackupViewModel />
  </UserControl.DataContext>
  <UserControl.Resources>
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/Resources/Styles/ScrollBarStyles.xaml" />
        <ResourceDictionary Source="/Resources/Styles/Colors.xaml" />
        <ResourceDictionary Source="/Resources/Styles/Buttons.xaml" />
        <ResourceDictionary Source="/Resources/Styles/TextBoxes.xaml" />
        <ResourceDictionary Source="/Resources/Styles/MainStyles.xaml" />
      </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
  </UserControl.Resources>
  <Grid Background="#F8FAFC">
    <ScrollViewer VerticalScrollBarVisibility="Auto" Style="{StaticResource ModernScrollViewer}">
      <StackPanel Margin="20,20">
        <!-- العنوان -->
        <StackPanel Margin="0,0,0,20">
          <StackPanel Orientation="Horizontal" Margin="0,0,0,6">
            <TextBlock Text="💾" FontSize="24" Margin="0,0,10,0" VerticalAlignment="Center" />
            <TextBlock
              Text="النسخ الاحتياطي"
              FontSize="22"
              FontWeight="Bold"
              Foreground="#1E293B"
              VerticalAlignment="Center"
            />
          </StackPanel>
          <TextBlock
            Text="إنشاء واسترجاع النسخ الاحتياطية"
            FontSize="13" Foreground="#64748B" Margin="34,0,0,0"
          />
        </StackPanel>
        <Grid Margin="0">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
          </Grid.RowDefinitions>
          <Border Background="White" CornerRadius="12" Padding="20" Margin="0,0,0,20">
            <Border.Effect>
              <DropShadowEffect Color="Black" BlurRadius="8" ShadowDepth="0" Opacity="0.08" />
            </Border.Effect>
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
              </Grid.ColumnDefinitions>
              <Button
                Grid.Column="0"
                Command="{Binding CreateBackupCommand}"
                Style="{StaticResource SuccessButton}"
                Height="70"
                Margin="0,0,10,0"
              >
                <StackPanel>
                  <TextBlock Text="💾" FontSize="22" />
                  <TextBlock Text="إنشاء نسخة احتياطية" FontSize="14" Margin="0,5,0,0" />
                </StackPanel>
              </Button>
              <Button
                Grid.Column="1"
                Command="{Binding RestoreBackupCommand}"
                Style="{StaticResource DangerButton}"
                Height="70"
                Margin="10,0,0,0"
              >
                <StackPanel>
                  <TextBlock Text="⚠️" FontSize="22" />
                  <TextBlock Text="استرجاع نسخة" FontSize="14" Margin="0,5,0,0" />
                </StackPanel>
              </Button>
            </Grid>
          </Border>
          <Border Background="White" CornerRadius="12" Padding="20">
            <Border.Effect>
              <DropShadowEffect Color="Black" BlurRadius="8" ShadowDepth="0" Opacity="0.08" />
            </Border.Effect>
            <StackPanel>
              <TextBlock
                Text="📂 النسخ الاحتياطية المتوفرة"
                FontSize="16"
                FontWeight="SemiBold"
                Foreground="#1E293B"
                Margin="0,0,0,12"
              />
              <ListBox
                ItemsSource="{Binding AvailableBackups}"
                SelectedItem="{Binding SelectedBackup}"
                Height="450"
              >
                <ListBox.ItemTemplate>
                  <DataTemplate>
                    <Border
                      Background="#F8FAFC"
                      BorderBrush="#E2E8F0"
                      BorderThickness="1"
                      CornerRadius="10"
                      Padding="16"
                      Margin="5"
                    >
                      <StackPanel>
                        <TextBlock
                          Text="{Binding}"
                          FontWeight="SemiBold"
                          FontSize="14"
                          Foreground="#1E293B"
                        />
                        <TextBlock
                          Text="ملف نسخة احتياطية"
                          FontSize="12"
                          Foreground="#64748B"
                          Margin="0,5,0,0"
                        />
                      </StackPanel>
                    </Border>
                  </DataTemplate>
                </ListBox.ItemTemplate>
              </ListBox>
            </StackPanel>
          </Border>
        </Grid>
      </StackPanel>
    </ScrollViewer>
  </Grid>
</UserControl>
