<UserControl
  x:Class="Alwajeih.Views.Management.ArchiveView"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  FlowDirection="RightToLeft"
  FontFamily="{StaticResource Tajawal}"
>
  <UserControl.Resources>
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/Resources/Styles/ScrollBarStyles.xaml" />
        <ResourceDictionary Source="/Resources/Styles/Colors.xaml" />
        <ResourceDictionary Source="/Resources/Styles/Buttons.xaml" />
        <ResourceDictionary Source="/Resources/Styles/MainStyles.xaml" />
        <ResourceDictionary Source="/Resources/Styles/DataGrids.xaml" />
      </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
  </UserControl.Resources>

  <Grid Background="#F8FAFC">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
    </Grid.RowDefinitions>

    <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† -->
    <StackPanel Grid.Row="0" Margin="20,20,20,16">
      <StackPanel Orientation="Horizontal" Margin="0,0,0,6">
        <TextBlock Text="ðŸ“¦" FontSize="24" Margin="0,0,10,0" VerticalAlignment="Center" />
        <TextBlock
          Text="Ø§Ù„Ø£Ø±Ø´ÙØ©"
          Style="{StaticResource PageTitle}"
          VerticalAlignment="Center"
        />
      </StackPanel>
      <TextBlock
        Text="Ø£Ø±Ø´ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¬Ù…Ø¹ÙŠØ© ÙˆØ¨Ø¯Ø¡ Ø¬Ù…Ø¹ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©"
        FontSize="14"
        Foreground="#64748B"
        Margin="34,0,0,0"
      />
    </StackPanel>

    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Style="{StaticResource ModernScrollViewer}">
      <StackPanel Margin="30,0,30,25">
        <!-- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø£Ø±Ø´ÙØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© -->
        <Border Style="{StaticResource ModernCard}" Margin="0,0,0,20">
          <StackPanel>
            <TextBlock Text="ðŸ“¦ Ø£Ø±Ø´ÙØ© Ø§Ù„Ø¬Ù…Ø¹ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©" Style="{StaticResource SectionTitle}" />
            
            <TextBlock Text="Ø¹Ù†Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¬Ù…Ø¹ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ© (6 Ø£Ø´Ù‡Ø±)ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø£Ø±Ø´ÙØ© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¨Ø¯Ø¡ Ø¬Ù…Ø¹ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©." 
                       FontSize="13" Foreground="#64748B" Margin="0,10,0,20" TextWrapping="Wrap" />
            
            <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù…Ø¹ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ© -->
            <Border Background="#F8FAFC" CornerRadius="8" Padding="15" Margin="0,0,0,20">
              <Grid>
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="*" MinWidth="150" />
                  <ColumnDefinition Width="*" MinWidth="150" />
                  <ColumnDefinition Width="*" MinWidth="150" />
                </Grid.ColumnDefinitions>
                
                <StackPanel Grid.Column="0">
                  <TextBlock Text="ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©" FontSize="12" Foreground="#64748B" />
                  <TextBlock x:Name="CurrentStartDateText" Text="30 Ø£ØºØ³Ø·Ø³ 2025" FontSize="16" FontWeight="SemiBold" Foreground="#1E293B" Margin="0,5,0,0" />
                </StackPanel>
                
                <StackPanel Grid.Column="1">
                  <TextBlock Text="ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©" FontSize="12" Foreground="#64748B" />
                  <TextBlock x:Name="CurrentEndDateText" Text="28 ÙØ¨Ø±Ø§ÙŠØ± 2026" FontSize="16" FontWeight="SemiBold" Foreground="#1E293B" Margin="0,5,0,0" />
                </StackPanel>
                
                <StackPanel Grid.Column="2">
                  <TextBlock Text="Ø§Ù„Ø­Ø§Ù„Ø©" FontSize="12" Foreground="#64748B" />
                  <TextBlock x:Name="CurrentStatusText" Text="ðŸŸ¢ Ù†Ø´Ø·Ø©" FontSize="16" FontWeight="SemiBold" Foreground="#10B981" Margin="0,5,0,0" />
                </StackPanel>
              </Grid>
            </Border>
            
            <!-- Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø£Ø±Ø´ÙØ© -->
            <TextBlock Text="Ø®Ø·ÙˆØ§Øª Ø§Ù„Ø£Ø±Ø´ÙØ©:" FontWeight="SemiBold" FontSize="14" Margin="0,0,0,10" />
            <StackPanel Margin="20,0,0,20">
              <TextBlock Text="1ï¸âƒ£ Ø³ÙŠØªÙ… Ù†Ø³Ø® Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ø¥Ù„Ù‰ Ù…Ù„Ù Ø£Ø±Ø´ÙŠÙ" FontSize="13" Margin="0,0,0,5" />
              <TextBlock Text="2ï¸âƒ£ Ø³ÙŠØªÙ… Ø­ÙØ¸ Ø§Ù„Ø£Ø±Ø´ÙŠÙ ÙÙŠ Ù…Ø¬Ù„Ø¯ Archives" FontSize="13" Margin="0,0,0,5" />
              <TextBlock Text="3ï¸âƒ£ Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© ÙØ§Ø±ØºØ©" FontSize="13" Margin="0,0,0,5" />
              <TextBlock Text="4ï¸âƒ£ ÙŠÙ…ÙƒÙ†Ùƒ Ø¨Ø¯Ø¡ Ø¬Ù…Ø¹ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© Ø¨ØªÙˆØ§Ø±ÙŠØ® Ø¬Ø¯ÙŠØ¯Ø©" FontSize="13" />
            </StackPanel>
            
            <!-- ØªØ­Ø°ÙŠØ± -->
            <Border Background="#FEF2F2" BorderBrush="#FCA5A5" BorderThickness="1" CornerRadius="8" Padding="15" Margin="0,0,0,20">
              <StackPanel>
                <TextBlock Text="âš ï¸ ØªØ­Ø°ÙŠØ± Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹" FontWeight="Bold" Foreground="#DC2626" FontSize="14" />
                <TextBlock Text="Ø§Ù„Ø£Ø±Ø´ÙØ© Ø¹Ù…Ù„ÙŠØ© Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡Ø§! ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ø®Ø° Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ù‚Ø¨Ù„ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©." 
                           Foreground="#991B1B" FontSize="13" Margin="0,5,0,0" TextWrapping="Wrap" />
              </StackPanel>
            </Border>
            
            <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª -->
            <StackPanel Orientation="Horizontal">
              <Button Content="ðŸ“¦ Ø£Ø±Ø´ÙØ© ÙˆØ¨Ø¯Ø¡ Ø¬Ù…Ø¹ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©" Style="{StaticResource DangerButton}" 
                      Click="ArchiveAndStartNew_Click" Padding="20,10" FontSize="14" />
            </StackPanel>
          </StackPanel>
        </Border>

        <!-- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø£Ø±Ø´ÙŠÙØ§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© -->
        <Border Style="{StaticResource ModernCard}">
          <StackPanel>
            <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
              <TextBlock Text="ðŸ“š Ø§Ù„Ø£Ø±Ø´ÙŠÙØ§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©" Style="{StaticResource SectionTitle}" />
              <Button Content="ðŸ”„ ØªØ­Ø¯ÙŠØ«" Style="{StaticResource SecondaryButton}" 
                      Click="RefreshArchives_Click" Margin="20,0,0,0" Padding="12,6" FontSize="12" />
            </StackPanel>
            
            <DataGrid x:Name="ArchivesDataGrid" Style="{StaticResource ModernDataGrid}" 
                      AutoGenerateColumns="False" Height="300">
              <DataGrid.Columns>
                <DataGridTextColumn Header="Ø§Ø³Ù… Ø§Ù„Ø£Ø±Ø´ÙŠÙ" Binding="{Binding FileName}" Width="*" MinWidth="150" />
                <DataGridTextColumn Header="ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©" Binding="{Binding StartDate, StringFormat=yyyy-MM-dd}" Width="Auto" MinWidth="130" />
                <DataGridTextColumn Header="ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ©" Binding="{Binding EndDate, StringFormat=yyyy-MM-dd}" Width="Auto" MinWidth="130" />
                <DataGridTextColumn Header="ØªØ§Ø±ÙŠØ® Ø§Ù„Ø£Ø±Ø´ÙØ©" Binding="{Binding ArchiveDate, StringFormat=yyyy-MM-dd HH:mm}" Width="Auto" MinWidth="160" />
                <DataGridTextColumn Header="Ø§Ù„Ø­Ø¬Ù…" Binding="{Binding FileSize}" Width="Auto" MinWidth="80" />
                <DataGridTemplateColumn Header="Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª" Width="Auto" MinWidth="180">
                  <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                      <StackPanel Orientation="Horizontal">
                        <Button Content="ðŸ“‚ ÙØªØ­" Style="{StaticResource SecondaryButton}" 
                                Click="OpenArchive_Click" Padding="10,4" FontSize="12" Margin="0,0,5,0" />
                        <Button Content="ðŸ—‘ï¸ Ø­Ø°Ù" Style="{StaticResource DangerButton}" 
                                Click="DeleteArchive_Click" Padding="10,4" FontSize="12" />
                      </StackPanel>
                    </DataTemplate>
                  </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
              </DataGrid.Columns>
            </DataGrid>
          </StackPanel>
        </Border>
      </StackPanel>
    </ScrollViewer>
  </Grid>
</UserControl>
