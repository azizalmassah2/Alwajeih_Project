<UserControl
  x:Class="Alwajeih.Views.Reports.ReportView"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  FlowDirection="RightToLeft"
  FontFamily="{StaticResource Tajawal}"
  FontSize="14"
  xmlns:vm="clr-namespace:Alwajeih.ViewModels.Reports"
>
  <UserControl.DataContext>
    <vm:ReportViewModel />
  </UserControl.DataContext>
  <UserControl.Resources>
    <ResourceDictionary>
      <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/Resources/Styles/ScrollBarStyles.xaml" />
        <ResourceDictionary Source="/Resources/Styles/DataGrids.xaml" />
        <ResourceDictionary Source="/Resources/Styles/Colors.xaml" />
        <ResourceDictionary Source="/Resources/Styles/Buttons.xaml" />
        <ResourceDictionary Source="/Resources/Styles/TextBoxes.xaml" />
        <ResourceDictionary Source="/Resources/Styles/MainStyles.xaml" />
      </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
  </UserControl.Resources>
  <Grid Background="#F8FAFC">
    <ScrollViewer VerticalScrollBarVisibility="Auto" Style="{StaticResource ModernScrollViewer}">
      <StackPanel Margin="20,20">
        <!-- Ø§Ù„Ø¹Ù†ÙˆØ§Ù† -->
        <StackPanel Margin="0,0,0,20">
          <StackPanel Orientation="Horizontal" Margin="0,0,0,6">
            <TextBlock Text="ðŸ“‘" FontSize="24" Margin="0,0,10,0" VerticalAlignment="Center" />
            <TextBlock
              Text="Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±"
              FontSize="22"
              FontWeight="Bold"
              Foreground="#1E293B"
              VerticalAlignment="Center"
            />
          </StackPanel>
          <TextBlock
            Text="ØªÙˆÙ„ÙŠØ¯ ÙˆØ¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ù…Ø®ØªÙ„ÙØ©"
            FontSize="13" Foreground="#64748B" Margin="34,0,0,0"
          />
        </StackPanel>
        <Border Background="White" CornerRadius="12" Padding="20" Margin="0,0,0,15">
          <Border.Effect>
            <DropShadowEffect Color="Black" BlurRadius="8" ShadowDepth="0" Opacity="0.08" />
          </Border.Effect>
          <StackPanel>
            <StackPanel>
              <!-- Ù…Ù„Ø§Ø­Ø¸Ø© -->
              <Border Background="#EFF6FF" BorderBrush="#3B82F6" BorderThickness="1" 
                      CornerRadius="8" Padding="10" Margin="0,0,0,12">
                <StackPanel Orientation="Horizontal">
                  <TextBlock Text="â„¹ï¸" FontSize="16" Margin="0,0,8,0" VerticalAlignment="Center" />
                  <TextBlock TextWrapping="Wrap" Foreground="#1E40AF" FontSize="12">
                    <Run Text="ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ:" FontWeight="SemiBold" />
                    <Run Text="Ù…Ù† ØªØ§Ø±ÙŠØ® Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø¬Ù…Ø¹ÙŠØ© Ø§Ù„Ù…Ø­Ø¯Ø¯ ÙÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª" />
                    <Run Text="â€¢" />
                    <Run Text="ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ:" FontWeight="SemiBold" />
                    <Run Text="ØªØ§Ø±ÙŠØ® Ø§Ù„ÙŠÙˆÙ…" />
                  </TextBlock>
                </StackPanel>
              </Border>
              
              <Grid>
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="2*" MinWidth="200" />
                  <ColumnDefinition Width="*" MinWidth="150" />
                  <ColumnDefinition Width="*" MinWidth="150" />
                  <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <ComboBox
                  Grid.Column="0"
                  SelectedIndex="{Binding SelectedReportType}"
                  Style="{StaticResource ModernComboBox}"
                  Margin="0,0,10,0"
                >
                  <ComboBoxItem Content="ðŸ“Š ØªÙ‚Ø±ÙŠØ± ÙŠÙˆÙ…ÙŠ" />
                  <ComboBoxItem Content="ðŸ“… ØªÙ‚Ø±ÙŠØ± Ø£Ø³Ø¨ÙˆØ¹ÙŠ" />
                  <ComboBoxItem Content="ðŸ¦ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø®Ø²Ù†Ø©" />
                  <ComboBoxItem Content="âš ï¸ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…ØªØ£Ø®Ø±Ø§Øª" />
                  <ComboBoxItem Content="ðŸ’° ØªÙ‚Ø±ÙŠØ± Ù…Ø§Ù„ÙŠ Ø´Ø§Ù…Ù„" />
                  <ComboBoxItem Content="ðŸ‘¤ ØªÙ‚Ø±ÙŠØ± Ù…Ø§Ù„ÙŠ Ø´Ø§Ù…Ù„ Ù„Ù„Ø¹Ø¶Ùˆ" />
                  <ComboBoxItem Content="ðŸ‘¥ ØªÙ‚Ø±ÙŠØ± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡" />
                  <ComboBoxItem Content="ðŸ’µ ØªÙ‚Ø±ÙŠØ± Ø§Ù„ØªØ­ØµÙŠÙ„Ø§Øª Ø§Ù„Ù…ÙØµÙ„" />
                  <ComboBoxItem Content="âš ï¸ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…ØªØ£Ø®Ø±Ø§Øª Ø§Ù„Ø´Ø§Ù…Ù„" />
                  <ComboBoxItem Content="ðŸ“‹ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø³ÙˆØ§Ø¨Ù‚" />
                  <ComboBoxItem Content="ðŸ¦ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø®Ø²Ù†Ø© Ø§Ù„Ù…ÙØµÙ„" />
                  <ComboBoxItem Content="ðŸ’³ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©" />
                  <ComboBoxItem Content="ðŸ“‹ ØªÙ‚Ø±ÙŠØ± Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ø¹Ø¶Ùˆ" />
                </ComboBox>
                
                <StackPanel Grid.Column="1" Margin="0,0,10,0">
                  <TextBlock Text="Ù…Ù† ØªØ§Ø±ÙŠØ®" FontSize="11" Foreground="#64748B" Margin="0,0,0,4" />
                  <DatePicker SelectedDate="{Binding StartDate}" />
                </StackPanel>
                
                <StackPanel Grid.Column="2" Margin="0,0,10,0">
                  <TextBlock Text="Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®" FontSize="11" Foreground="#64748B" Margin="0,0,0,4" />
                  <DatePicker SelectedDate="{Binding EndDate}" />
                </StackPanel>
                
                <Button
                  Grid.Column="3"
                  Command="{Binding GenerateReportCommand}"
                  Style="{StaticResource PrimaryButton}"
                  Width="Auto" MinWidth="100"
                >
                  <StackPanel Orientation="Horizontal">
                    <TextBlock Text="ðŸ“Š" Margin="0,0,8,0" />
                    <TextBlock Text="ØªÙˆÙ„ÙŠØ¯" />
                  </StackPanel>
                </Button>
              </Grid>
            </StackPanel>
            
            <!-- Ø®ÙŠØ§Ø±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©: Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ø¶Ùˆ -->
            <StackPanel Margin="0,15,0,0">
              <Border Background="#F8FAFC" CornerRadius="8" Padding="12">
                <Grid>
                  <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                  </Grid.ColumnDefinitions>
                  <TextBlock Grid.Column="0" Text="Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¹Ø¶Ùˆ (Ù„Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø¹Ø¶Ùˆ Ù…Ø­Ø¯Ø¯):" FontWeight="SemiBold" 
                             VerticalAlignment="Center" Margin="0,0,10,0" />
                  <ComboBox Grid.Column="1" 
                            ItemsSource="{Binding Members}"
                            SelectedItem="{Binding SelectedMember}"
                            DisplayMemberPath="Name"
                            Style="{StaticResource ModernComboBox}" />
                </Grid>
              </Border>
            </StackPanel>
          </StackPanel>
        </Border>
        <Border Background="White" CornerRadius="12" Padding="20">
          <Border.Effect>
            <DropShadowEffect Color="Black" BlurRadius="8" ShadowDepth="0" Opacity="0.08" />
          </Border.Effect>
          <Grid>
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto" />
              <RowDefinition Height="*" />
              <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <TextBlock
              Grid.Row="0"
              Text="{Binding ReportTitle}"
              Style="{StaticResource SectionTitle}"
            />
            <!-- DataGrid Ù…Ø¹ Border -->
            <Border
              Grid.Row="1"
              CornerRadius="8"
              BorderBrush="#E2E8F0"
              BorderThickness="1"
              Background="White"
              Margin="0,15,0,15"
            >
              <DataGrid
                ItemsSource="{Binding ReportData}"
                Height="450"
                AutoGenerateColumns="True"
                IsReadOnly="True"
                Style="{StaticResource ModernDataGrid}"
              >
              </DataGrid>
            </Border>
            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center">
              <Button
                Command="{Binding ExportToExcelCommand}"
                Style="{StaticResource SuccessButton}"
                Width="Auto" MinWidth="130"
                Margin="5"
              >
                <StackPanel Orientation="Horizontal">
                  <TextBlock Text="ðŸ“Š" FontSize="16" Margin="0,0,8,0" />
                  <TextBlock Text="ØªØµØ¯ÙŠØ± Excel" />
                </StackPanel>
              </Button>
              <Button
                Command="{Binding ExportToPdfCommand}"
                Style="{StaticResource DangerButton}"
                Width="Auto" MinWidth="130"
                Margin="5"
              >
                <StackPanel Orientation="Horizontal">
                  <TextBlock Text="ðŸ“„" FontSize="16" Margin="0,0,8,0" />
                  <TextBlock Text="ØªØµØ¯ÙŠØ± PDF" />
                </StackPanel>
              </Button>
            </StackPanel>
          </Grid>
        </Border>
      </StackPanel>
    </ScrollViewer>
  </Grid>
</UserControl>
